#!/usr/bin/env python3
"""
Chibi Agents NFT â€” One-file installer.

Save this file anywhere and run:
    python setup_chibi_agents.py

It creates a chibi-agents-nft/ folder with everything you need.
"""

import base64, os

PROJECT = "chibi-agents-nft"
FILES = {
    "requirements.txt": "cmVxdWVzdHM+PTIuMjguMAo=",
    "README.md": "IyBDaGliaSBBZ2VudHMgTkZUIOKAlCBJbWFnZSBHZW5lcmF0aW9uIFBpcGVsaW5lCgpBIHBpcGVsaW5lIGZvciBnZW5lcmF0aW5nIGEgMjAwMC1waWVjZSBjaGliaSBzZWNyZXQgYWdlbnQgTkZUIGNvbGxlY3Rpb24gdXNpbmcgZmFsLmFpLgoKIyMgU2V0dXAKCmBgYGJhc2gKIyBJbnN0YWxsIGRlcGVuZGVuY2llcwpwaXAgaW5zdGFsbCAtciByZXF1aXJlbWVudHMudHh0CgojIFNldCB5b3VyIGZhbC5haSBBUEkga2V5CmV4cG9ydCBGQUxfS0VZPSJ5b3VyLWZhbC1hcGkta2V5LWhlcmUiCmBgYAoKIyMgU3RlcCAxOiBHZW5lcmF0ZSBQcm9tcHRzICYgTWV0YWRhdGEKCmBgYGJhc2gKcHl0aG9uIGdlbmVyYXRlX3Byb21wdHMucHkKYGBgCgpUaGlzIGNyZWF0ZXM6Ci0gYG91dHB1dC9mdWxsX2NvbGxlY3Rpb24uanNvbmAg4oCUIGFsbCAyMDAwIGFnZW50cyB3aXRoIHByb21wdHMsIHRyYWl0cywgYW5kIHJhcml0eQotIGBvdXRwdXQvcHJvbXB0c19vbmx5LnR4dGAg4oCUIGp1c3QgcHJvbXB0cywgb25lIHBlciBsaW5lCi0gYG91dHB1dC9tZXRhZGF0YS8wMDAxLmpzb25gIHRocm91Z2ggYG91dHB1dC9tZXRhZGF0YS8yMDAwLmpzb25gIOKAlCBPcGVuU2VhLXN0YW5kYXJkIG1ldGFkYXRhCgojIyMgUmFyaXR5IERpc3RyaWJ1dGlvbgp8IFJhcml0eSAgICB8IENvdW50IHwgUGVyY2VudGFnZSB8CnwtLS0tLS0tLS0tLXwtLS0tLS0tfC0tLS0tLS0tLS0tLXwKfCBDb21tb24gICAgfCA0MDAgICB8IDIwJSAgICAgICAgfAp8IFVuY29tbW9uICB8IDc2MCAgIHwgMzglICAgICAgICB8CnwgUmFyZSAgICAgIHwgNjAwICAgfCAzMCUgICAgICAgIHwKfCBMZWdlbmRhcnkgfCAyNDAgICB8IDEyJSAgICAgICAgfAoKIyMgU3RlcCAyOiBHZW5lcmF0ZSBJbWFnZXMKCmBgYGJhc2gKIyBUZXN0IGJhdGNoIChmaXJzdCAyMCkKcHl0aG9uIGdlbmVyYXRlX2ltYWdlcy5weSAtLXN0YXJ0IDEgLS1lbmQgMjAKCiMgRnVsbCBydW4gKGFsbCAyMDAwKQpweXRob24gZ2VuZXJhdGVfaW1hZ2VzLnB5CgojIFJlZG8gc3BlY2lmaWMgaW1hZ2VzCnB5dGhvbiBnZW5lcmF0ZV9pbWFnZXMucHkgLS1yZWRvIDMsMTcsNDIKCiMgVXNlIGEgZGlmZmVyZW50IG1vZGVsCnB5dGhvbiBnZW5lcmF0ZV9pbWFnZXMucHkgLS1tb2RlbCBmYWwtYWkvbmFuby1iYW5hbmEtcHJvCgojIEFkanVzdCBkZWxheSBiZXR3ZWVuIHJlcXVlc3RzIChkZWZhdWx0IDEuMHMpCnB5dGhvbiBnZW5lcmF0ZV9pbWFnZXMucHkgLS1kZWxheSAyLjAKYGBgCgpGZWF0dXJlczoKLSAqKlJlc3VtZSBjYXBhYmlsaXR5Kiog4oCUIHJlLXJ1bm5pbmcgc2tpcHMgYWxyZWFkeS1kb3dubG9hZGVkIGltYWdlcwotICoqQmF0Y2ggc3VwcG9ydCoqIOKAlCB1c2UgYC0tc3RhcnRgIGFuZCBgLS1lbmRgIHRvIGdlbmVyYXRlIGEgcmFuZ2UKLSAqKlJlZG8gbW9kZSoqIOKAlCBgLS1yZWRvIDMsMTcsNDJgIHJlZ2VuZXJhdGVzIG9ubHkgdGhvc2UgdG9rZW4gSURzCi0gKipSYXRlIGxpbWl0aW5nKiog4oCUIGNvbmZpZ3VyYWJsZSBkZWxheSBiZXR3ZWVuIHJlcXVlc3RzCi0gKipBdXRvLXJldHJ5Kiog4oCUIDMgcmV0cmllcyBwZXIgaW1hZ2Ugd2l0aCBleHBvbmVudGlhbCBiYWNrb2ZmCi0gKipQcm9ncmVzcyB0cmFja2luZyoqIOKAlCByZXBvcnRzIHN1Y2Nlc3MvZmFpbHVyZSBjb3VudHMgYW5kIGxpc3RzIGZhaWxlZCBJRHMKCkltYWdlcyBhcmUgc2F2ZWQgdG8gYG91dHB1dC9pbWFnZXMvMDAwMS5wbmdgIHRocm91Z2ggYG91dHB1dC9pbWFnZXMvMjAwMC5wbmdgLgoKIyMgU3RlcCAzOiBVcGRhdGUgTWV0YWRhdGEgd2l0aCBJUEZTIENJRAoKQWZ0ZXIgdXBsb2FkaW5nIGltYWdlcyB0byBJUEZTOgoKYGBgYmFzaApweXRob24gdXBkYXRlX21ldGFkYXRhX2NpZC5weSBRbVlvdXJBY3R1YWxDSURIZXJlCmBgYAoKVGhpcyByZXBsYWNlcyBgWU9VUl9DSURfSEVSRWAgaW4gYWxsIDIwMDAgbWV0YWRhdGEgZmlsZXMgd2l0aCB5b3VyIHJlYWwgQ0lELgoKIyMgUHJvamVjdCBTdHJ1Y3R1cmUKCmBgYApjaGliaS1hZ2VudHMtbmZ0LwrilJzilIDilIAgZ2VuZXJhdGVfcHJvbXB0cy5weSAgICAgICMgUGhhc2UgMTogdHJhaXQgZ2VuZXJhdGlvbiAmIG1ldGFkYXRhCuKUnOKUgOKUgCBnZW5lcmF0ZV9pbWFnZXMucHkgICAgICAgIyBQaGFzZSAyOiBmYWwuYWkgaW1hZ2UgZ2VuZXJhdGlvbgrilJzilIDilIAgdXBkYXRlX21ldGFkYXRhX2NpZC5weSAgICMgUGhhc2UgMzogSVBGUyBDSUQgcmVwbGFjZW1lbnQK4pSc4pSA4pSAIHJlcXVpcmVtZW50cy50eHQK4pSc4pSA4pSAIFJFQURNRS5tZArilJTilIDilIAgb3V0cHV0LyAgICAgICAgICAgICAgICAgICMgY3JlYXRlZCBieSBzY3JpcHRzCiAgICDilJzilIDilIAgZnVsbF9jb2xsZWN0aW9uLmpzb24KICAgIOKUnOKUgOKUgCBwcm9tcHRzX29ubHkudHh0CiAgICDilJzilIDilIAgbWV0YWRhdGEvCiAgICDilIIgICDilJzilIDilIAgMDAwMS5qc29uCiAgICDilIIgICDilJTilIDilIAgLi4uCiAgICDilJTilIDilIAgaW1hZ2VzLwogICAgICAgIOKUnOKUgOKUgCAwMDAxLnBuZwogICAgICAgIOKUlOKUgOKUgCAuLi4KYGBgCg==",
    "generate_prompts.py": "IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiJHZW5lcmF0ZSAyMDAwIHVuaXF1ZSBjaGliaSBhZ2VudCBORlQgdHJhaXQgY29tYmluYXRpb25zLiIiIgoKaW1wb3J0IGpzb24KaW1wb3J0IG9zCmltcG9ydCByYW5kb20KZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgQ291bnRlcgoKcmFuZG9tLnNlZWQoNDIpCgojIOKUgOKUgCBUcmFpdCBwb29scyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKClNVSVRfU1RZTEVTID0gWwogICAgImJsYWNrIHN1aXQgYmxhY2sgdGllIiwgImJsYWNrIHN1aXQgYmxhY2sgdHVydGxlbmVjayIsCiAgICAiYmxhY2sgc3VpdCBvcGVuIGNvbGxhciBibGFjayBzaGlydCIsICJibGFjayBzdWl0IHdoaXRlIHNoaXJ0IGxvb3NlIHRpZSIsCiAgICAiYmxhY2sgc3VpdCB3aGl0ZSBzaGlydCBza2lubnkgYmxhY2sgdGllIiwgImJsYWNrIGRvdWJsZS1icmVhc3RlZCBzdWl0IiwKICAgICJibGFjayB0aHJlZS1waWVjZSBzdWl0IHdpdGggdmVzdCB2aXNpYmxlIiwgImJsYWNrIHN1aXQgbWFuZGFyaW4gY29sbGFyIiwKICAgICJibGFjayBzdWl0IGJ1dHRvbmVkIGFsbCB0aGUgd2F5IHVwIiwgImJsYWNrIHN1aXQgcm9sbGVkIHNsZWV2ZXMiLAogICAgInJ1bXBsZWQgYmxhY2sgc3VpdCBubyB0aWUiLCAic2hhcnAgYmxhY2sgc3VpdCBibGFjayBzaGlydCIsCiAgICAiY3Jpc3AgYmxhY2sgc3VpdCB3aGl0ZSBzaGlydCBibGFjayB0aWUiLCAiYmxhY2sgc3VpdCB3aXRoIHBvY2tldCBzcXVhcmUiLApdCgpTVU5HTEFTU0VTID0gWwogICAgImJsYWNrIGF2aWF0b3Igc3VuZ2xhc3NlcyIsICJibGFjayB3YXlmYXJlciBzdW5nbGFzc2VzIiwKICAgICJyb3VuZCBibGFjayBzdW5nbGFzc2VzIiwgInJlY3Rhbmd1bGFyIGJsYWNrIHN1bmdsYXNzZXMiLAogICAgIndyYXBhcm91bmQgYmxhY2sgc3VuZ2xhc3NlcyIsICJibGFjayBjbHVibWFzdGVyIHN1bmdsYXNzZXMiLAogICAgImNhdC1leWUgYmxhY2sgc3VuZ2xhc3NlcyIsICJvdmFsIGJsYWNrIHN1bmdsYXNzZXMiLAogICAgImFuZ3VsYXIgYmxhY2sgc3VuZ2xhc3NlcyIsICJ0aGluIHJlY3Rhbmd1bGFyIGJsYWNrIHN1bmdsYXNzZXMiLApdCgpIQUlSX1NUWUxFUyA9IFsKICAgICJzaG9ydCBzcGlreSBoYWlyIiwgImxvbmcgc3RyYWlnaHQgaGFpciIsICJtZXNzeSBjdXJseSBoYWlyIiwKICAgICJzbGlja2VkIGJhY2sgaGFpciIsICJzaG9ydCBidXp6Y3V0IiwgImxvbmcgd2F2eSBoYWlyIHdpdGggYmFuZ3MiLAogICAgInNob3J0IHRleHR1cmVkIGhhaXIgd2l0aCB1bmRlcmN1dCIsICJtZWRpdW0gdG91c2xlZCBoYWlyIiwKICAgICJuZWF0IHNob3J0IGhhaXIgd2l0aCBzaWRlIHBhcnQiLCAic2hvcnQgY2hvcHB5IGhhaXIiLAogICAgInRpZ2h0IGJyYWlkcyBwdWxsZWQgYmFjayIsICJzaG9ydCBmbGF0LXRvcCBtaWxpdGFyeSBoYWlyY3V0IiwKICAgICJtZXNzeSBtZWRpdW0gaGFpciB3aXRoIGJhbmdzIiwgImxvbmcgaGFpciBpbiBhIGJ1biIsICJtb2hhd2siLAogICAgInNob3VsZGVyIGxlbmd0aCBzdHJhaWdodCBoYWlyIiwKXQoKSEFJUl9DT0xPUlMgPSBbCiAgICAiYmxhY2siLCAiZGFyayBicm93biIsICJsaWdodCBicm93biIsICJibG9uZGUiLCAiZGFyayBibG9uZGUiLAogICAgInBsYXRpbnVtIGJsb25kZSIsICJyZWQiLCAiZGFyayByZWQiLCAiYXVidXJuIiwgInNpbHZlci13aGl0ZSIsCiAgICAiZHVzdHkgYmx1ZSIsICJwaW5rIiwgImdyYXkiLCAiamV0IGJsYWNrIiwgInN0cmF3YmVycnkgYmxvbmRlIiwKICAgICJwdXJwbGUiLCAiZ3JlZW4tdGludGVkIGJsYWNrIiwKXQoKU0tJTl9UT05FUyA9IFsKICAgICJwYWxlIHNraW4iLCAibGlnaHQgc2tpbiIsICJmYWlyIHBpbmsgc2tpbiIsICJsaWdodCB0YW4gc2tpbiIsCiAgICAib2xpdmUgc2tpbiIsICJ3YXJtIG1lZGl1bSBza2luIiwgInRhbiBza2luIiwgIndhcm0gZ29sZGVuLWJyb3duIHNraW4iLAogICAgImJyb3duIHNraW4iLCAiZGFyayBicm93biBza2luIiwgImRlZXAgZGFyayBza2luIiwgInBhbGUgcG9yY2VsYWluIHNraW4iLApdCgpBQ0NFU1NPUklFUyA9IFsKICAgICJjb2lsZWQgY2xlYXIgZWFycGllY2UiLCAicmFkaW8gZWFycGllY2Ugd2l0aCBjb2lsZWQgY29yZCIsCiAgICAic2luZ2xlIGVhcnBpZWNlIiwgImFtZXJpY2FuIGZsYWcgbGFwZWwgcGluIiwgInNpbHZlciBsYXBlbCBwaW4iLAogICAgImJhZGdlIGxhbnlhcmQgdHVja2VkIGludG8gamFja2V0IiwgInBlbiBjbGlwcGVkIHRvIGJyZWFzdCBwb2NrZXQiLAogICAgImNsYXNzaWZpZWQgZm9sZGVyIHBlZWtpbmcgZnJvbSBqYWNrZXQiLCAiY2lnYXJldHRlIGJlaGluZCBlYXIiLAogICAgInNpbHZlciB0aWUgY2xpcCIsICJjaGFpbiBjb25uZWN0aW5nIGVhciBjdWZmIHRvIGNvbGxhciIsCiAgICAiZG9nIHRhZ3MgdHVja2VkIHVuZGVyIHNoaXJ0IiwgIndyaXN0d2F0Y2ggcGVla2luZyBmcm9tIHNsZWV2ZSIsCl0KClRBVFRPT1MgPSBbCiAgICAibmVjayB0YXR0b28gcGVla2luZyBhYm92ZSBjb2xsYXIiLCAiaGFuZCB0YXR0b29zIHZpc2libGUiLAogICAgInNsZWV2ZSB0YXR0b28gcGVla2luZyBmcm9tIGN1ZmYiLCAidGVhcmRyb3AgZmFjZSB0YXR0b28iLAogICAgInNwaWRlciB3ZWIgdGF0dG9vIG9uIG5lY2siLCAiYmFyY29kZSB0YXR0b28gb24gbmVjayIsCiAgICAiY3Jvc3MgdGF0dG9vIHVuZGVyIGV5ZSIsICJzbmFrZSB0YXR0b28gY3Jhd2xpbmcgdXAgbmVjayIsCiAgICAicm9zZSB0YXR0b28gYmVoaW5kIGVhciIsICJza3VsbCB0YXR0b28gYmVoaW5kIGVhciIsCiAgICAiZmxhbWUgdGF0dG9vIG9uIG5lY2siLCAia251Y2tsZSB0YXR0b29zIiwgInN0YXIgdGF0dG9vIGJlaGluZCBlYXIiLAogICAgImRhZ2dlciB0YXR0b28gb24gaGFuZCIsICJmb3JlYXJtIHRhdHRvb3MgdmlzaWJsZSIsCl0KClBJRVJDSU5HUyA9IFsKICAgICJnb2xkIG5vc2Ugc3R1ZCIsICJzaWx2ZXIgbm9zZSByaW5nIiwgInNlcHR1bSByaW5nIiwgImJ1bGwgbm9zZSByaW5nIiwKICAgICJleWVicm93IHBpZXJjaW5nIiwgImxpcCByaW5nIiwgImRvdWJsZSBub3NlIHJpbmciLAogICAgImluZHVzdHJpYWwgZWFyIHBpZXJjaW5nIiwgImRvdWJsZSBob29wIGVhcnJpbmciLCAiZWFyIGN1ZmYiLAogICAgImNoYWluIG5vc2UgcmluZyB0byBlYXIgY3VmZiIsICJ0b25ndWUgcGllcmNpbmciLApdCgpGUkVDS0xFUyA9IFsKICAgICJmcmVja2xlcyBvbiBub3NlIiwgInNjYXR0ZXJlZCBmcmVja2xlcyBhY3Jvc3MgY2hlZWtzIiwKICAgICJsaWdodCBmcmVja2xlcyIsICJzdWJ0bGUgZnJlY2tsZXMiLApdCgpCQUNLR1JPVU5EUyA9IFsKICAgICJncmFpbnkgc3VydmVpbGxhbmNlIGZvb3RhZ2Ugb2YgcGFya2luZyBnYXJhZ2UiLAogICAgInVuZGVyZ3JvdW5kIGJ1bmtlciB3aXRoIHJlZCBlbWVyZ2VuY3kgbGlnaHRzIiwKICAgICJjb3JrIGJvYXJkIHdpdGggcmVkIHN0cmluZyBjb25zcGlyYWN5IHdhbGwiLAogICAgImZvZ2d5IGJsYWNrIGhlbGljb3B0ZXIgdGFybWFjIiwKICAgICJlbXB0eSBpbnRlcnJvZ2F0aW9uIHJvb20gc2luZ2xlIGxpZ2h0YnVsYiIsCiAgICAicmVkYWN0ZWQgZG9jdW1lbnRzIHNjYXR0ZXJlZCBkZXNrIiwKICAgICJzaGFkb3d5IGhhbGx3YXkgd2l0aCBmbGlja2VyaW5nIGZsdW9yZXNjZW50IGxpZ2h0cyIsCiAgICAiZGVzZXJ0IGhpZ2h3YXkgQXJlYSA1MSBzZWFyY2hsaWdodHMiLAogICAgInNlY3JldCB1bmRlcmdyb3VuZCBsYWIgd2l0aCBncmVlbiBnbG93aW5nIHR1YmVzIiwKICAgICJyYWlueSBuaWdodCBlbWJhc3N5IHJvb2Z0b3Agd2l0aCBzYXRlbGxpdGUgZGlzaGVzIiwKICAgICJsb25nIGRhcmsgY29ycmlkb3Igd2l0aCBzaW5nbGUgcmVkIGV4aXQgc2lnbiIsCiAgICAiZm9nZ3kgYnJpZGdlIGF0IG1pZG5pZ2h0IHdpdGggZGlzdGFudCBoZWFkbGlnaHRzIiwKICAgICJlbXB0eSBwYXJraW5nIHN0cnVjdHVyZSB3aXRoIGZsaWNrZXJpbmcgbGlnaHRzIiwKICAgICJkYXJrIHNlcnZlciByb29tIHdpdGggcm93cyBvZiBibGlua2luZyBibHVlIGxpZ2h0cyIsCiAgICAicmVzdHJpY3RlZCBtaWxpdGFyeSBoYW5nYXIgd2l0aCBkcmFwZWQgdGFycHMiLAogICAgImRlc2VydCBuaWdodCBza3kgd2l0aCBkaXN0YW50IHVubWFya2VkIHdhcmVob3VzZSIsCiAgICAiZGltbHkgbGl0IHdhciByb29tIHdpdGggZ2xvd2luZyBtb25pdG9ycyIsCiAgICAic2F0ZWxsaXRlIGRpc2ggYXJyYXkgaW4gZGVzZXJ0IGF0IG5pZ2h0IiwKICAgICJibGFja2VkIG91dCBTVVYgbW90b3JjYWRlIG9uIHJhaW55IHN0cmVldCIsCiAgICAiYWJhbmRvbmVkIHdhcmVob3VzZSB3aXRoIHNjYXR0ZXJlZCBjbGFzc2lmaWVkIGZpbGVzIiwKICAgICJyb29mdG9wIGF0IG5pZ2h0IHdpdGggZGlzdGFudCByYWRpbyB0b3dlciBibGlua2luZyByZWQiLAogICAgImRlZXAgdW5kZXJncm91bmQgdHVubmVsIHdpdGggcGlwZXMgYW5kIGRpbSB5ZWxsb3cgbGlnaHRzIiwKICAgICJzdGF0aWMtZmlsbGVkIFRWIHNjcmVlbnMgaW4gZGFyayBjb250cm9sIHJvb20iLAogICAgImFpcnBvcnQgdGFybWFjIHdpdGggdW5tYXJrZWQgYmxhY2sgaGVsaWNvcHRlciIsCiAgICAibmlnaHQgc2t5IHdpdGggYmx1cnJ5IFVGTyBhbmQgc2VhcmNobGlnaHRzIiwKICAgICJQZW50YWdvbiBoYWxsd2F5IHdpdGggZmx1b3Jlc2NlbnQgbGlnaHRpbmciLAogICAgImJsdXJyeSByZWRhY3RlZCBkb2N1bWVudHMgYW5kIGZpbGluZyBjYWJpbmV0cyIsCl0KCkVYUFJFU1NJT05TID0gWwogICAgInRpbnkgbmV1dHJhbCBtb3V0aCIsICJ0aW55IGZsYXQgbW91dGgiLCAic21hbGwgZXhwcmVzc2lvbmxlc3MgbW91dGgiLAogICAgInNtYWxsIGZsYXQgbW91dGgiLCAidGlueSBzdHJhaWdodCBtb3V0aCIsCl0KCiMg4pSA4pSAIFJhcml0eS13ZWlnaHRlZCBvcHRpb25hbCB0cmFpdCBzZWxlY3Rpb24g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiMgVGFyZ2V0IGRpc3RyaWJ1dGlvbjoKIyAgIENvbW1vbiAgKDAgZXh0cmFzKTogfjIwJSAgLT4gNDAwCiMgICBVbmNvbW1vbigxIGV4dHJhKTogIH4zOCUgIC0+IDc2MAojICAgUmFyZSAgICAoMiBleHRyYXMpOiB+MzAlICAtPiA2MDAKIyAgIExlZ2VuZGFyeSgzLTQgZXh0cmFzKTp+MTIlIC0+IDI0MAoKUkFSSVRZX1dFSUdIVFMgPSB7CiAgICAwOiA0MDAsICAgIyBDb21tb24KICAgIDE6IDc2MCwgICAjIFVuY29tbW9uCiAgICAyOiA2MDAsICAgIyBSYXJlCiAgICAzOiAyMDAsICAgIyBMZWdlbmRhcnkgKDMgZXh0cmFzKQogICAgNDogNDAsICAgICMgTGVnZW5kYXJ5ICg0IGV4dHJhcykKfQoKUkFSSVRZX0xBQkVMUyA9IHsKICAgIDA6ICJDb21tb24iLAogICAgMTogIlVuY29tbW9uIiwKICAgIDI6ICJSYXJlIiwKICAgIDM6ICJMZWdlbmRhcnkiLAogICAgNDogIkxlZ2VuZGFyeSIsCn0KCk9QVElPTkFMX0NBVEVHT1JJRVMgPSBbCiAgICAoImFjY2Vzc29yeSIsIEFDQ0VTU09SSUVTKSwKICAgICgidGF0dG9vIiwgVEFUVE9PUyksCiAgICAoInBpZXJjaW5nIiwgUElFUkNJTkdTKSwKICAgICgiZnJlY2tsZXMiLCBGUkVDS0xFUyksCl0KCgpkZWYgcGlja19leHRyYXMobnVtX2V4dHJhczogaW50KSAtPiBkaWN0OgogICAgIiIiUGljayB3aGljaCBvcHRpb25hbCBjYXRlZ29yaWVzIGFyZSBhY3RpdmUgYW5kIHNlbGVjdCBhIHRyYWl0IGZyb20gZWFjaC4iIiIKICAgIGNhdHMgPSByYW5kb20uc2FtcGxlKE9QVElPTkFMX0NBVEVHT1JJRVMsIGs9bnVtX2V4dHJhcykKICAgIHJlc3VsdCA9IHt9CiAgICBmb3IgbmFtZSwgcG9vbCBpbiBPUFRJT05BTF9DQVRFR09SSUVTOgogICAgICAgIGlmIChuYW1lLCBwb29sKSBpbiBjYXRzOgogICAgICAgICAgICByZXN1bHRbbmFtZV0gPSByYW5kb20uY2hvaWNlKHBvb2wpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gTm9uZQogICAgcmV0dXJuIHJlc3VsdAoKCmRlZiBnZW5lcmF0ZV9hZ2VudCh0b2tlbl9pZDogaW50LCBudW1fZXh0cmFzOiBpbnQpIC0+IGRpY3Q6CiAgICAiIiJHZW5lcmF0ZSBhIHNpbmdsZSBhZ2VudCdzIHRyYWl0cy4iIiIKICAgIHRyYWl0cyA9IHsKICAgICAgICAic3VpdF9zdHlsZSI6IHJhbmRvbS5jaG9pY2UoU1VJVF9TVFlMRVMpLAogICAgICAgICJzdW5nbGFzc2VzIjogcmFuZG9tLmNob2ljZShTVU5HTEFTU0VTKSwKICAgICAgICAiaGFpcl9zdHlsZSI6IHJhbmRvbS5jaG9pY2UoSEFJUl9TVFlMRVMpLAogICAgICAgICJoYWlyX2NvbG9yIjogcmFuZG9tLmNob2ljZShIQUlSX0NPTE9SUyksCiAgICAgICAgInNraW5fdG9uZSI6IHJhbmRvbS5jaG9pY2UoU0tJTl9UT05FUyksCiAgICAgICAgImJhY2tncm91bmQiOiByYW5kb20uY2hvaWNlKEJBQ0tHUk9VTkRTKSwKICAgICAgICAiZXhwcmVzc2lvbiI6IHJhbmRvbS5jaG9pY2UoRVhQUkVTU0lPTlMpLAogICAgfQogICAgZXh0cmFzID0gcGlja19leHRyYXMobnVtX2V4dHJhcykKICAgIHRyYWl0cy51cGRhdGUoZXh0cmFzKQoKICAgIHJhcml0eSA9IFJBUklUWV9MQUJFTFNbbnVtX2V4dHJhc10KCiAgICAjIEJ1aWxkIHByb21wdAogICAgcGFydHMgPSBbCiAgICAgICAgIkNoaWJpIGFnZW50LCBvdmVyc2l6ZWQgaGVhZCwgbGFyZ2UgZ2xvc3N5IGJsYWNrIGV5ZXMgd2l0aCB3aGl0ZSBoaWdobGlnaHRzIiwKICAgICAgICBmInt0cmFpdHNbJ2hhaXJfY29sb3InXX0ge3RyYWl0c1snaGFpcl9zdHlsZSddfSIsCiAgICAgICAgdHJhaXRzWyJza2luX3RvbmUiXSwKICAgIF0KICAgIGlmIHRyYWl0cy5nZXQoImZyZWNrbGVzIik6CiAgICAgICAgcGFydHMuYXBwZW5kKHRyYWl0c1siZnJlY2tsZXMiXSkKICAgIHBhcnRzLmFwcGVuZCh0cmFpdHNbImV4cHJlc3Npb24iXSkKICAgIHBhcnRzLmFwcGVuZCh0cmFpdHNbInN1aXRfc3R5bGUiXSkKICAgIHBhcnRzLmFwcGVuZCh0cmFpdHNbInN1bmdsYXNzZXMiXSkKICAgIGlmIHRyYWl0cy5nZXQoImFjY2Vzc29yeSIpOgogICAgICAgIHBhcnRzLmFwcGVuZCh0cmFpdHNbImFjY2Vzc29yeSJdKQogICAgaWYgdHJhaXRzLmdldCgidGF0dG9vIik6CiAgICAgICAgcGFydHMuYXBwZW5kKHRyYWl0c1sidGF0dG9vIl0pCiAgICBpZiB0cmFpdHMuZ2V0KCJwaWVyY2luZyIpOgogICAgICAgIHBhcnRzLmFwcGVuZCh0cmFpdHNbInBpZXJjaW5nIl0pCiAgICBwYXJ0cy5hcHBlbmQoImNoZXN0LXVwIHBvcnRyYWl0IikKICAgIHBhcnRzLmFwcGVuZChmInt0cmFpdHNbJ2JhY2tncm91bmQnXX0gYmFja2dyb3VuZCIpCiAgICBwYXJ0cy5hcHBlbmQoImthd2FpaSBkaWdpdGFsIGFydCwgTkZUIGNvbGxlY3RpYmxlIGNhcmQgc3R5bGUiKQoKICAgIHByb21wdCA9ICIsICIuam9pbihwYXJ0cykKCiAgICByZXR1cm4gewogICAgICAgICJ0b2tlbl9pZCI6IHRva2VuX2lkLAogICAgICAgICJ0cmFpdHMiOiB0cmFpdHMsCiAgICAgICAgInJhcml0eSI6IHJhcml0eSwKICAgICAgICAibnVtX2V4dHJhcyI6IG51bV9leHRyYXMsCiAgICAgICAgInByb21wdCI6IHByb21wdCwKICAgIH0KCgpkZWYgYnVpbGRfb3BlbnNlYV9tZXRhZGF0YShhZ2VudDogZGljdCkgLT4gZGljdDoKICAgICIiIkJ1aWxkIE9wZW5TZWEtc3RhbmRhcmQgbWV0YWRhdGEgSlNPTiBmb3IgYSBzaW5nbGUgYWdlbnQuIiIiCiAgICB0ID0gYWdlbnRbInRyYWl0cyJdCiAgICBhdHRyaWJ1dGVzID0gWwogICAgICAgIHsidHJhaXRfdHlwZSI6ICJTdWl0IFN0eWxlIiwgInZhbHVlIjogdFsic3VpdF9zdHlsZSJdfSwKICAgICAgICB7InRyYWl0X3R5cGUiOiAiU3VuZ2xhc3NlcyIsICJ2YWx1ZSI6IHRbInN1bmdsYXNzZXMiXX0sCiAgICAgICAgeyJ0cmFpdF90eXBlIjogIkhhaXIgU3R5bGUiLCAidmFsdWUiOiB0WyJoYWlyX3N0eWxlIl19LAogICAgICAgIHsidHJhaXRfdHlwZSI6ICJIYWlyIENvbG9yIiwgInZhbHVlIjogdFsiaGFpcl9jb2xvciJdfSwKICAgICAgICB7InRyYWl0X3R5cGUiOiAiU2tpbiBUb25lIiwgInZhbHVlIjogdFsic2tpbl90b25lIl19LAogICAgICAgIHsidHJhaXRfdHlwZSI6ICJCYWNrZ3JvdW5kIiwgInZhbHVlIjogdFsiYmFja2dyb3VuZCJdfSwKICAgICAgICB7InRyYWl0X3R5cGUiOiAiRXhwcmVzc2lvbiIsICJ2YWx1ZSI6IHRbImV4cHJlc3Npb24iXX0sCiAgICAgICAgeyJ0cmFpdF90eXBlIjogIlJhcml0eSIsICJ2YWx1ZSI6IGFnZW50WyJyYXJpdHkiXX0sCiAgICBdCiAgICBpZiB0LmdldCgiYWNjZXNzb3J5Iik6CiAgICAgICAgYXR0cmlidXRlcy5hcHBlbmQoeyJ0cmFpdF90eXBlIjogIkFjY2Vzc29yeSIsICJ2YWx1ZSI6IHRbImFjY2Vzc29yeSJdfSkKICAgIGlmIHQuZ2V0KCJ0YXR0b28iKToKICAgICAgICBhdHRyaWJ1dGVzLmFwcGVuZCh7InRyYWl0X3R5cGUiOiAiVGF0dG9vIiwgInZhbHVlIjogdFsidGF0dG9vIl19KQogICAgaWYgdC5nZXQoInBpZXJjaW5nIik6CiAgICAgICAgYXR0cmlidXRlcy5hcHBlbmQoeyJ0cmFpdF90eXBlIjogIlBpZXJjaW5nIiwgInZhbHVlIjogdFsicGllcmNpbmciXX0pCiAgICBpZiB0LmdldCgiZnJlY2tsZXMiKToKICAgICAgICBhdHRyaWJ1dGVzLmFwcGVuZCh7InRyYWl0X3R5cGUiOiAiRnJlY2tsZXMiLCAidmFsdWUiOiB0WyJmcmVja2xlcyJdfSkKCiAgICB0aWQgPSBhZ2VudFsidG9rZW5faWQiXQogICAgcmV0dXJuIHsKICAgICAgICAibmFtZSI6IGYiQ2hpYmkgQWdlbnQgI3t0aWQ6MDRkfSIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIkEgY3V0ZSBjaGliaSBzZWNyZXQgYWdlbnQgZnJvbSB0aGUgMjAwMC1waWVjZSBDaGliaSBBZ2VudCBjb2xsZWN0aW9uLiIsCiAgICAgICAgImltYWdlIjogZiJpcGZzOi8vWU9VUl9DSURfSEVSRS97dGlkOjA0ZH0ucG5nIiwKICAgICAgICAiYXR0cmlidXRlcyI6IGF0dHJpYnV0ZXMsCiAgICB9CgoKZGVmIG1haW4oKToKICAgICMgQnVpbGQgdGhlIHJhcml0eSBzY2hlZHVsZTogYSBsaXN0IG9mIG51bV9leHRyYXMgdmFsdWVzLCBvbmUgcGVyIGFnZW50CiAgICBzY2hlZHVsZSA9IFtdCiAgICBmb3IgbnVtX2V4dHJhcywgY291bnQgaW4gUkFSSVRZX1dFSUdIVFMuaXRlbXMoKToKICAgICAgICBzY2hlZHVsZS5leHRlbmQoW251bV9leHRyYXNdICogY291bnQpCiAgICBhc3NlcnQgbGVuKHNjaGVkdWxlKSA9PSAyMDAwLCBmIlNjaGVkdWxlIGhhcyB7bGVuKHNjaGVkdWxlKX0gZW50cmllcywgZXhwZWN0ZWQgMjAwMCIKICAgIHJhbmRvbS5zaHVmZmxlKHNjaGVkdWxlKQoKICAgICMgR2VuZXJhdGUgYWdlbnRzLCBlbnN1cmluZyB1bmlxdWVuZXNzCiAgICBzZWVuX2NvbWJvcyA9IHNldCgpCiAgICBhZ2VudHMgPSBbXQogICAgYXR0ZW1wdHMgPSAwCiAgICBtYXhfYXR0ZW1wdHMgPSA1MDAwMAoKICAgIGZvciBpLCBudW1fZXh0cmFzIGluIGVudW1lcmF0ZShzY2hlZHVsZSk6CiAgICAgICAgdG9rZW5faWQgPSBpICsgMQogICAgICAgIHdoaWxlIGF0dGVtcHRzIDwgbWF4X2F0dGVtcHRzOgogICAgICAgICAgICBhdHRlbXB0cyArPSAxCiAgICAgICAgICAgIGFnZW50ID0gZ2VuZXJhdGVfYWdlbnQodG9rZW5faWQsIG51bV9leHRyYXMpCiAgICAgICAgICAgICMgQ3JlYXRlIGEgaGFzaGFibGUga2V5IGZyb20gdGhlIHRyYWl0cwogICAgICAgICAgICB0ID0gYWdlbnRbInRyYWl0cyJdCiAgICAgICAgICAgIGNvbWJvX2tleSA9ICgKICAgICAgICAgICAgICAgIHRbInN1aXRfc3R5bGUiXSwgdFsic3VuZ2xhc3NlcyJdLCB0WyJoYWlyX3N0eWxlIl0sCiAgICAgICAgICAgICAgICB0WyJoYWlyX2NvbG9yIl0sIHRbInNraW5fdG9uZSJdLCB0WyJiYWNrZ3JvdW5kIl0sCiAgICAgICAgICAgICAgICB0WyJleHByZXNzaW9uIl0sCiAgICAgICAgICAgICAgICB0LmdldCgiYWNjZXNzb3J5IiksIHQuZ2V0KCJ0YXR0b28iKSwKICAgICAgICAgICAgICAgIHQuZ2V0KCJwaWVyY2luZyIpLCB0LmdldCgiZnJlY2tsZXMiKSwKICAgICAgICAgICAgKQogICAgICAgICAgICBpZiBjb21ib19rZXkgbm90IGluIHNlZW5fY29tYm9zOgogICAgICAgICAgICAgICAgc2Vlbl9jb21ib3MuYWRkKGNvbWJvX2tleSkKICAgICAgICAgICAgICAgIGFnZW50cy5hcHBlbmQoYWdlbnQpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYiRVJST1I6IENvdWxkIG5vdCBnZW5lcmF0ZSB1bmlxdWUgY29tYm8gYWZ0ZXIge21heF9hdHRlbXB0c30gYXR0ZW1wdHMiKQogICAgICAgICAgICByZXR1cm4KCiAgICAjIOKUgOKUgCBPdXRwdXQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgogICAgb3MubWFrZWRpcnMoIm91dHB1dC9tZXRhZGF0YSIsIGV4aXN0X29rPVRydWUpCiAgICBvcy5tYWtlZGlycygib3V0cHV0L2ltYWdlcyIsIGV4aXN0X29rPVRydWUpCgogICAgIyBmdWxsX2NvbGxlY3Rpb24uanNvbgogICAgd2l0aCBvcGVuKCJvdXRwdXQvZnVsbF9jb2xsZWN0aW9uLmpzb24iLCAidyIpIGFzIGY6CiAgICAgICAganNvbi5kdW1wKGFnZW50cywgZiwgaW5kZW50PTIpCgogICAgIyBwcm9tcHRzX29ubHkudHh0CiAgICB3aXRoIG9wZW4oIm91dHB1dC9wcm9tcHRzX29ubHkudHh0IiwgInciKSBhcyBmOgogICAgICAgIGZvciBhZ2VudCBpbiBhZ2VudHM6CiAgICAgICAgICAgIGYud3JpdGUoYWdlbnRbInByb21wdCJdICsgIlxuIikKCiAgICAjIEluZGl2aWR1YWwgbWV0YWRhdGEgZmlsZXMKICAgIGZvciBhZ2VudCBpbiBhZ2VudHM6CiAgICAgICAgbWV0YSA9IGJ1aWxkX29wZW5zZWFfbWV0YWRhdGEoYWdlbnQpCiAgICAgICAgcGF0aCA9IGYib3V0cHV0L21ldGFkYXRhL3thZ2VudFsndG9rZW5faWQnXTowNGR9Lmpzb24iCiAgICAgICAgd2l0aCBvcGVuKHBhdGgsICJ3IikgYXMgZjoKICAgICAgICAgICAganNvbi5kdW1wKG1ldGEsIGYsIGluZGVudD0yKQoKICAgICMg4pSA4pSAIFN1bW1hcnkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgogICAgcmFyaXR5X2NvdW50cyA9IENvdW50ZXIoYVsicmFyaXR5Il0gZm9yIGEgaW4gYWdlbnRzKQogICAgZXh0cmFzX2NvdW50cyA9IENvdW50ZXIoYVsibnVtX2V4dHJhcyJdIGZvciBhIGluIGFnZW50cykKCiAgICBwcmludCgiPSIgKiA2MCkKICAgIHByaW50KCJDSElCSSBBR0VOVCBDT0xMRUNUSU9OIOKAlCBHRU5FUkFUSU9OIENPTVBMRVRFIikKICAgIHByaW50KCI9IiAqIDYwKQogICAgcHJpbnQoZiJUb3RhbCBhZ2VudHMgZ2VuZXJhdGVkOiB7bGVuKGFnZW50cyl9IikKICAgIHByaW50KGYiVW5pcXVlIGNvbWJpbmF0aW9ucyB2ZXJpZmllZDoge2xlbihzZWVuX2NvbWJvcyl9IikKICAgIHByaW50KGYiR2VuZXJhdGlvbiBhdHRlbXB0czoge2F0dGVtcHRzfSIpCiAgICBwcmludCgpCiAgICBwcmludCgiUkFSSVRZIERJU1RSSUJVVElPTjoiKQogICAgcHJpbnQoIi0iICogNDApCiAgICBmb3IgbGFiZWwgaW4gWyJDb21tb24iLCAiVW5jb21tb24iLCAiUmFyZSIsICJMZWdlbmRhcnkiXToKICAgICAgICBjb3VudCA9IHJhcml0eV9jb3VudHMuZ2V0KGxhYmVsLCAwKQogICAgICAgIHBjdCA9IGNvdW50IC8gbGVuKGFnZW50cykgKiAxMDAKICAgICAgICBwcmludChmIiAge2xhYmVsOjEyc306IHtjb3VudDo1ZH0gICh7cGN0OjUuMWZ9JSkiKQogICAgcHJpbnQoKQogICAgcHJpbnQoIkVYVFJBUyBCUkVBS0RPV046IikKICAgIHByaW50KCItIiAqIDQwKQogICAgZm9yIG4gaW4gc29ydGVkKGV4dHJhc19jb3VudHMpOgogICAgICAgIGNvdW50ID0gZXh0cmFzX2NvdW50c1tuXQogICAgICAgIHBjdCA9IGNvdW50IC8gbGVuKGFnZW50cykgKiAxMDAKICAgICAgICBwcmludChmIiAge259IGV4dHJhczoge2NvdW50OjVkfSAgKHtwY3Q6NS4xZn0lKSIpCiAgICBwcmludCgpCgogICAgIyBQcmludCBmaXJzdCA1IHByb21wdHMKICAgIHByaW50KCJGSVJTVCA1IFBST01QVFM6IikKICAgIHByaW50KCI9IiAqIDYwKQogICAgZm9yIGFnZW50IGluIGFnZW50c1s6NV06CiAgICAgICAgdGlkID0gYWdlbnRbInRva2VuX2lkIl0KICAgICAgICBwcmludChmIlxuWyN7dGlkOjA0ZH1dIFJhcml0eToge2FnZW50WydyYXJpdHknXX0gKHthZ2VudFsnbnVtX2V4dHJhcyddfSBleHRyYXMpIikKICAgICAgICBwcmludChmIiAge2FnZW50Wydwcm9tcHQnXX0iKQogICAgcHJpbnQoKQoKICAgICMgVHJhaXQgZnJlcXVlbmN5IHN0YXRzCiAgICBwcmludCgiVFJBSVQgRlJFUVVFTkNZIEhJR0hMSUdIVFM6IikKICAgIHByaW50KCItIiAqIDQwKQogICAgZm9yIHRyYWl0X25hbWUgaW4gWyJhY2Nlc3NvcnkiLCAidGF0dG9vIiwgInBpZXJjaW5nIiwgImZyZWNrbGVzIl06CiAgICAgICAgaGFzX2l0ID0gc3VtKDEgZm9yIGEgaW4gYWdlbnRzIGlmIGFbInRyYWl0cyJdLmdldCh0cmFpdF9uYW1lKSkKICAgICAgICBwY3QgPSBoYXNfaXQgLyBsZW4oYWdlbnRzKSAqIDEwMAogICAgICAgIHByaW50KGYiICB7dHJhaXRfbmFtZToxMnN9OiB7aGFzX2l0OjVkfSBhZ2VudHMgaGF2ZSBvbmUgKHtwY3Q6NS4xZn0lKSIpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oKQo=",
    "generate_images.py": "IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiIKR2VuZXJhdGUgTkZUIGltYWdlcyB2aWEgZmFsLmFpIHF1ZXVlIEFQSS4KClVzYWdlOgogICAgcHl0aG9uIGdlbmVyYXRlX2ltYWdlcy5weSAgICAgICAgICAgICAgICAgICAgIyBnZW5lcmF0ZSBhbGwgMjAwMAogICAgcHl0aG9uIGdlbmVyYXRlX2ltYWdlcy5weSAtLXN0YXJ0IDEgLS1lbmQgMjAgIyBnZW5lcmF0ZSAjMDAwMS0jMDAyMAogICAgcHl0aG9uIGdlbmVyYXRlX2ltYWdlcy5weSAtLXN0YXJ0IDUwIC0tZW5kIDUwICMgZ2VuZXJhdGUganVzdCAjMDA1MAogICAgcHl0aG9uIGdlbmVyYXRlX2ltYWdlcy5weSAtLXJlZG8gMywxNyw0MiAgICAgICMgcmVkbyBzcGVjaWZpYyB0b2tlbiBJRHMKIiIiCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IGpzb24KaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKCmltcG9ydCByZXF1ZXN0cwoKIyDilIDilIAgQ29uZmlnIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKRkFMX0tFWSA9IG9zLmVudmlyb24uZ2V0KCJGQUxfS0VZIiwgIiIpCk1PREVMX0lEID0gImZhbC1haS9uYW5vLWJhbmFuYSIKUVVFVUVfVVJMID0gZiJodHRwczovL3F1ZXVlLmZhbC5ydW4ve01PREVMX0lEfSIKQ09MTEVDVElPTl9QQVRIID0gIm91dHB1dC9mdWxsX2NvbGxlY3Rpb24uanNvbiIKSU1BR0VTX0RJUiA9ICJvdXRwdXQvaW1hZ2VzIgpERUxBWV9CRVRXRUVOX1JFUVVFU1RTID0gMS4wICAjIHNlY29uZHMgYmV0d2VlbiBzdWJtaXR0aW5nIHJlcXVlc3RzClBPTExfSU5URVJWQUwgPSAyLjAgICAgICAgICAgICMgc2Vjb25kcyBiZXR3ZWVuIHN0YXR1cyBwb2xscwpNQVhfUE9MTF9BVFRFTVBUUyA9IDE1MCAgICAgICAjIG1heCBwb2xscyBwZXIgaW1hZ2UgKH41IG1pbikKTUFYX1JFVFJJRVMgPSAzICAgICAgICAgICAgICAgIyByZXRyaWVzIG9uIGZhaWx1cmUgcGVyIGltYWdlCgojIOKUgOKUgCBIZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZGVmIGhlYWRlcnMoKToKICAgIHJldHVybiB7CiAgICAgICAgIkF1dGhvcml6YXRpb24iOiBmIktleSB7RkFMX0tFWX0iLAogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICB9CgoKZGVmIGF1dGhfaGVhZGVycygpOgogICAgcmV0dXJuIHsiQXV0aG9yaXphdGlvbiI6IGYiS2V5IHtGQUxfS0VZfSJ9CgoKZGVmIHN1Ym1pdF9yZXF1ZXN0KHByb21wdDogc3RyKSAtPiBkaWN0OgogICAgIiIiU3VibWl0IGFuIGltYWdlIGdlbmVyYXRpb24gcmVxdWVzdCB0byB0aGUgZmFsLmFpIHF1ZXVlLiIiIgogICAgcGF5bG9hZCA9IHsKICAgICAgICAicHJvbXB0IjogcHJvbXB0LAogICAgICAgICJhc3BlY3RfcmF0aW8iOiAiMToxIiwKICAgICAgICAib3V0cHV0X2Zvcm1hdCI6ICJwbmciLAogICAgICAgICJudW1faW1hZ2VzIjogMSwKICAgIH0KICAgIHJlc3AgPSByZXF1ZXN0cy5wb3N0KFFVRVVFX1VSTCwgaGVhZGVycz1oZWFkZXJzKCksIGpzb249cGF5bG9hZCwgdGltZW91dD0zMCkKICAgIHJlc3AucmFpc2VfZm9yX3N0YXR1cygpCiAgICByZXR1cm4gcmVzcC5qc29uKCkKCgpkZWYgcG9sbF91bnRpbF9kb25lKHN0YXR1c191cmw6IHN0cikgLT4gc3RyOgogICAgIiIiUG9sbCB0aGUgcXVldWUgdW50aWwgdGhlIHJlcXVlc3QgY29tcGxldGVzLiBSZXR1cm5zIHRoZSByZXNwb25zZSBVUkwgc3RhdHVzLiIiIgogICAgZm9yIGF0dGVtcHQgaW4gcmFuZ2UoTUFYX1BPTExfQVRURU1QVFMpOgogICAgICAgIHJlc3AgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgIHN0YXR1c191cmwsCiAgICAgICAgICAgIGhlYWRlcnM9YXV0aF9oZWFkZXJzKCksCiAgICAgICAgICAgIHBhcmFtcz17ImxvZ3MiOiAxfSwKICAgICAgICAgICAgdGltZW91dD0zMCwKICAgICAgICApCiAgICAgICAgcmVzcC5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICBkYXRhID0gcmVzcC5qc29uKCkKICAgICAgICBzdGF0dXMgPSBkYXRhLmdldCgic3RhdHVzIiwgIlVOS05PV04iKQoKICAgICAgICBpZiBzdGF0dXMgPT0gIkNPTVBMRVRFRCI6CiAgICAgICAgICAgIHJldHVybiAiQ09NUExFVEVEIgogICAgICAgIGVsaWYgc3RhdHVzIGluICgiRkFJTEVEIiwgIkNBTkNFTExFRCIpOgogICAgICAgICAgICBlcnJvcl9tc2cgPSBkYXRhLmdldCgiZXJyb3IiLCAiVW5rbm93biBlcnJvciIpCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmIlJlcXVlc3Qge3N0YXR1c306IHtlcnJvcl9tc2d9IikKCiAgICAgICAgdGltZS5zbGVlcChQT0xMX0lOVEVSVkFMKQoKICAgIHJhaXNlIFRpbWVvdXRFcnJvcihmIlJlcXVlc3QgZGlkIG5vdCBjb21wbGV0ZSBhZnRlciB7TUFYX1BPTExfQVRURU1QVFN9IHBvbGxzIikKCgpkZWYgZmV0Y2hfcmVzdWx0KHJlc3BvbnNlX3VybDogc3RyKSAtPiBkaWN0OgogICAgIiIiRmV0Y2ggdGhlIGZpbmFsIHJlc3VsdCBmcm9tIHRoZSBxdWV1ZS4iIiIKICAgIHJlc3AgPSByZXF1ZXN0cy5nZXQocmVzcG9uc2VfdXJsLCBoZWFkZXJzPWF1dGhfaGVhZGVycygpLCB0aW1lb3V0PTMwKQogICAgcmVzcC5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgIHJldHVybiByZXNwLmpzb24oKQoKCmRlZiBkb3dubG9hZF9pbWFnZShpbWFnZV91cmw6IHN0ciwgZGVzdF9wYXRoOiBzdHIpOgogICAgIiIiRG93bmxvYWQgYW4gaW1hZ2UgZnJvbSBVUkwgdG8gbG9jYWwgZmlsZS4iIiIKICAgIHJlc3AgPSByZXF1ZXN0cy5nZXQoaW1hZ2VfdXJsLCB0aW1lb3V0PTEyMCkKICAgIHJlc3AucmFpc2VfZm9yX3N0YXR1cygpCiAgICB3aXRoIG9wZW4oZGVzdF9wYXRoLCAid2IiKSBhcyBmOgogICAgICAgIGYud3JpdGUocmVzcC5jb250ZW50KQoKCmRlZiBnZW5lcmF0ZV9zaW5nbGUodG9rZW5faWQ6IGludCwgcHJvbXB0OiBzdHIsIGZvcmNlOiBib29sID0gRmFsc2UpIC0+IGJvb2w6CiAgICAiIiJHZW5lcmF0ZSBhIHNpbmdsZSBpbWFnZS4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MsIEZhbHNlIG9uIGZhaWx1cmUuIiIiCiAgICBmaWxlbmFtZSA9IGYie3Rva2VuX2lkOjA0ZH0ucG5nIgogICAgZGVzdF9wYXRoID0gb3MucGF0aC5qb2luKElNQUdFU19ESVIsIGZpbGVuYW1lKQoKICAgICMgUmVzdW1lIGNhcGFiaWxpdHk6IHNraXAgaWYgYWxyZWFkeSBleGlzdHMgKHVubGVzcyBmb3JjZS9yZWRvKQogICAgaWYgbm90IGZvcmNlIGFuZCBvcy5wYXRoLmV4aXN0cyhkZXN0X3BhdGgpIGFuZCBvcy5wYXRoLmdldHNpemUoZGVzdF9wYXRoKSA+IDA6CiAgICAgICAgcmV0dXJuIFRydWUgICMgYWxyZWFkeSBkb25lCgogICAgZm9yIHJldHJ5IGluIHJhbmdlKE1BWF9SRVRSSUVTKToKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgU3RlcCAxOiBTdWJtaXQgdG8gcXVldWUKICAgICAgICAgICAgcXVldWVfcmVzcCA9IHN1Ym1pdF9yZXF1ZXN0KHByb21wdCkKICAgICAgICAgICAgcmVxdWVzdF9pZCA9IHF1ZXVlX3Jlc3AuZ2V0KCJyZXF1ZXN0X2lkIiwgIj8iKQogICAgICAgICAgICBzdGF0dXNfdXJsID0gcXVldWVfcmVzcC5nZXQoInN0YXR1c191cmwiKQogICAgICAgICAgICByZXNwb25zZV91cmwgPSBxdWV1ZV9yZXNwLmdldCgicmVzcG9uc2VfdXJsIikKCiAgICAgICAgICAgIGlmIG5vdCBzdGF0dXNfdXJsIG9yIG5vdCByZXNwb25zZV91cmw6CiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoZiJNaXNzaW5nIHN0YXR1cy9yZXNwb25zZSBVUkxzIGluIHF1ZXVlIHJlc3BvbnNlOiB7cXVldWVfcmVzcH0iKQoKICAgICAgICAgICAgIyBTdGVwIDI6IFBvbGwgdW50aWwgZG9uZQogICAgICAgICAgICBwb2xsX3VudGlsX2RvbmUoc3RhdHVzX3VybCkKCiAgICAgICAgICAgICMgU3RlcCAzOiBGZXRjaCByZXN1bHQKICAgICAgICAgICAgcmVzdWx0ID0gZmV0Y2hfcmVzdWx0KHJlc3BvbnNlX3VybCkKCiAgICAgICAgICAgICMgU3RlcCA0OiBFeHRyYWN0IGltYWdlIFVSTCBhbmQgZG93bmxvYWQKICAgICAgICAgICAgaW1hZ2VzID0gcmVzdWx0LmdldCgiaW1hZ2VzIiwgW10pCiAgICAgICAgICAgIGlmIG5vdCBpbWFnZXM6CiAgICAgICAgICAgICAgICAjIFNvbWUgbW9kZWxzIHJldHVybiBvdXRwdXQuaW1hZ2VzIG9yIGRhdGEuaW1hZ2VzCiAgICAgICAgICAgICAgICBvdXRwdXQgPSByZXN1bHQuZ2V0KCJvdXRwdXQiLCByZXN1bHQuZ2V0KCJkYXRhIiwge30pKQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShvdXRwdXQsIGRpY3QpOgogICAgICAgICAgICAgICAgICAgIGltYWdlcyA9IG91dHB1dC5nZXQoImltYWdlcyIsIFtdKQoKICAgICAgICAgICAgaWYgbm90IGltYWdlczoKICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmIk5vIGltYWdlcyBpbiByZXNwb25zZToge2pzb24uZHVtcHMocmVzdWx0KVs6NTAwXX0iKQoKICAgICAgICAgICAgaW1hZ2VfdXJsID0gaW1hZ2VzWzBdLmdldCgidXJsIikgaWYgaXNpbnN0YW5jZShpbWFnZXNbMF0sIGRpY3QpIGVsc2UgaW1hZ2VzWzBdCiAgICAgICAgICAgIGlmIG5vdCBpbWFnZV91cmw6CiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoZiJObyBVUkwgaW4gaW1hZ2UgZGF0YToge2ltYWdlc1swXX0iKQoKICAgICAgICAgICAgZG93bmxvYWRfaW1hZ2UoaW1hZ2VfdXJsLCBkZXN0X3BhdGgpCiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgd2FpdCA9IDIgKiogKHJldHJ5ICsgMSkKICAgICAgICAgICAgcHJpbnQoZiIgICAgWyFdIEF0dGVtcHQge3JldHJ5ICsgMX0ve01BWF9SRVRSSUVTfSBmYWlsZWQ6IHtlfSIpCiAgICAgICAgICAgIGlmIHJldHJ5IDwgTUFYX1JFVFJJRVMgLSAxOgogICAgICAgICAgICAgICAgcHJpbnQoZiIgICAgWyFdIFJldHJ5aW5nIGluIHt3YWl0fXMuLi4iKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCh3YWl0KQoKICAgIHJldHVybiBGYWxzZQoKCiMg4pSA4pSAIE1haW4g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACgpkZWYgbWFpbigpOgogICAgZ2xvYmFsIFFVRVVFX1VSTCwgREVMQVlfQkVUV0VFTl9SRVFVRVNUUwoKICAgIHBhcnNlciA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKGRlc2NyaXB0aW9uPSJHZW5lcmF0ZSBORlQgaW1hZ2VzIHZpYSBmYWwuYWkiKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS1zdGFydCIsIHR5cGU9aW50LCBkZWZhdWx0PTEsIGhlbHA9IkZpcnN0IHRva2VuIElEIChkZWZhdWx0OiAxKSIpCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCItLWVuZCIsIHR5cGU9aW50LCBkZWZhdWx0PTIwMDAsIGhlbHA9Ikxhc3QgdG9rZW4gSUQgKGRlZmF1bHQ6IDIwMDApIikKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoIi0tcmVkbyIsIHR5cGU9c3RyLCBkZWZhdWx0PSIiLCBoZWxwPSJDb21tYS1zZXBhcmF0ZWQgdG9rZW4gSURzIHRvIHJlZ2VuZXJhdGUiKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS1kZWxheSIsIHR5cGU9ZmxvYXQsIGRlZmF1bHQ9REVMQVlfQkVUV0VFTl9SRVFVRVNUUywgaGVscD0iRGVsYXkgYmV0d2VlbiByZXF1ZXN0cyBpbiBzZWNvbmRzIikKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoIi0tbW9kZWwiLCB0eXBlPXN0ciwgZGVmYXVsdD1NT0RFTF9JRCwgaGVscD1mImZhbC5haSBtb2RlbCBJRCAoZGVmYXVsdDoge01PREVMX0lEfSkiKQogICAgYXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKCkKCiAgICBpZiBhcmdzLm1vZGVsICE9IE1PREVMX0lEOgogICAgICAgIFFVRVVFX1VSTCA9IGYiaHR0cHM6Ly9xdWV1ZS5mYWwucnVuL3thcmdzLm1vZGVsfSIKICAgIERFTEFZX0JFVFdFRU5fUkVRVUVTVFMgPSBhcmdzLmRlbGF5CgogICAgaWYgbm90IEZBTF9LRVk6CiAgICAgICAgcHJpbnQoIkVSUk9SOiBGQUxfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIG5vdCBzZXQuIikKICAgICAgICBzeXMuZXhpdCgxKQoKICAgICMgTG9hZCBjb2xsZWN0aW9uCiAgICB3aXRoIG9wZW4oQ09MTEVDVElPTl9QQVRIKSBhcyBmOgogICAgICAgIGNvbGxlY3Rpb24gPSBqc29uLmxvYWQoZikKCiAgICAjIEJ1aWxkIGxvb2t1cCBieSB0b2tlbl9pZAogICAgYWdlbnRzX2J5X2lkID0ge2FbInRva2VuX2lkIl06IGEgZm9yIGEgaW4gY29sbGVjdGlvbn0KCiAgICAjIERldGVybWluZSB3aGljaCBJRHMgdG8gcHJvY2VzcwogICAgaWYgYXJncy5yZWRvOgogICAgICAgIHRva2VuX2lkcyA9IFtpbnQoeC5zdHJpcCgpKSBmb3IgeCBpbiBhcmdzLnJlZG8uc3BsaXQoIiwiKSBpZiB4LnN0cmlwKCldCiAgICAgICAgZm9yY2UgPSBUcnVlCiAgICAgICAgcHJpbnQoZiJSRURPIG1vZGU6IHJlZ2VuZXJhdGluZyB7bGVuKHRva2VuX2lkcyl9IHNwZWNpZmljIGltYWdlcyIpCiAgICBlbHNlOgogICAgICAgIHRva2VuX2lkcyA9IGxpc3QocmFuZ2UoYXJncy5zdGFydCwgYXJncy5lbmQgKyAxKSkKICAgICAgICBmb3JjZSA9IEZhbHNlCiAgICAgICAgcHJpbnQoZiJHZW5lcmF0aW5nIGltYWdlcyAje2FyZ3Muc3RhcnQ6MDRkfSB0byAje2FyZ3MuZW5kOjA0ZH0gKHtsZW4odG9rZW5faWRzKX0gdG90YWwpIikKCiAgICBvcy5tYWtlZGlycyhJTUFHRVNfRElSLCBleGlzdF9vaz1UcnVlKQoKICAgICMgQ291bnQgYWxyZWFkeSBkb25lIChmb3IgcmVzdW1lIGRpc3BsYXkpCiAgICBhbHJlYWR5X2RvbmUgPSAwCiAgICB0b19nZW5lcmF0ZSA9IFtdCiAgICBmb3IgdGlkIGluIHRva2VuX2lkczoKICAgICAgICBpZiB0aWQgbm90IGluIGFnZW50c19ieV9pZDoKICAgICAgICAgICAgcHJpbnQoZiJXQVJOSU5HOiBUb2tlbiBJRCB7dGlkfSBub3QgZm91bmQgaW4gY29sbGVjdGlvbiwgc2tpcHBpbmciKQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGRlc3QgPSBvcy5wYXRoLmpvaW4oSU1BR0VTX0RJUiwgZiJ7dGlkOjA0ZH0ucG5nIikKICAgICAgICBpZiBub3QgZm9yY2UgYW5kIG9zLnBhdGguZXhpc3RzKGRlc3QpIGFuZCBvcy5wYXRoLmdldHNpemUoZGVzdCkgPiAwOgogICAgICAgICAgICBhbHJlYWR5X2RvbmUgKz0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRvX2dlbmVyYXRlLmFwcGVuZCh0aWQpCgogICAgcHJpbnQoZiJBbHJlYWR5IGNvbXBsZXRlZDoge2FscmVhZHlfZG9uZX0iKQogICAgcHJpbnQoZiJUbyBnZW5lcmF0ZToge2xlbih0b19nZW5lcmF0ZSl9IikKICAgIHByaW50KGYiTW9kZWw6IHthcmdzLm1vZGVsfSIpCiAgICBwcmludChmIkRlbGF5IGJldHdlZW4gcmVxdWVzdHM6IHtERUxBWV9CRVRXRUVOX1JFUVVFU1RTfXMiKQogICAgcHJpbnQoIi0iICogNTApCgogICAgaWYgbm90IHRvX2dlbmVyYXRlOgogICAgICAgIHByaW50KCJOb3RoaW5nIHRvIGdlbmVyYXRlIOKAlCBhbGwgaW1hZ2VzIGFscmVhZHkgZXhpc3QhIikKICAgICAgICByZXR1cm4KCiAgICBzdWNjZXNzZXMgPSAwCiAgICBmYWlsdXJlcyA9IDAKICAgIGZhaWxlZF9pZHMgPSBbXQoKICAgIGZvciBpLCB0aWQgaW4gZW51bWVyYXRlKHRvX2dlbmVyYXRlKToKICAgICAgICBhZ2VudCA9IGFnZW50c19ieV9pZFt0aWRdCiAgICAgICAgcHJvZ3Jlc3MgPSBmIlt7aSArIDF9L3tsZW4odG9fZ2VuZXJhdGUpfV0iCiAgICAgICAgcHJpbnQoZiJ7cHJvZ3Jlc3N9ICN7dGlkOjA0ZH0gKHthZ2VudFsncmFyaXR5J119KS4uLiIsIGVuZD0iICIsIGZsdXNoPVRydWUpCgogICAgICAgIG9rID0gZ2VuZXJhdGVfc2luZ2xlKHRpZCwgYWdlbnRbInByb21wdCJdLCBmb3JjZT1mb3JjZSkKCiAgICAgICAgaWYgb2s6CiAgICAgICAgICAgIHN1Y2Nlc3NlcyArPSAxCiAgICAgICAgICAgIHByaW50KCJPSyIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZmFpbHVyZXMgKz0gMQogICAgICAgICAgICBmYWlsZWRfaWRzLmFwcGVuZCh0aWQpCiAgICAgICAgICAgIHByaW50KCJGQUlMRUQiKQoKICAgICAgICAjIFJhdGUgbGltaXRpbmcgZGVsYXkgKHNraXAgYWZ0ZXIgbGFzdCBvbmUpCiAgICAgICAgaWYgaSA8IGxlbih0b19nZW5lcmF0ZSkgLSAxOgogICAgICAgICAgICB0aW1lLnNsZWVwKERFTEFZX0JFVFdFRU5fUkVRVUVTVFMpCgogICAgIyDilIDilIAgU3VtbWFyeSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAgIHByaW50KCkKICAgIHByaW50KCI9IiAqIDUwKQogICAgcHJpbnQoIkdFTkVSQVRJT04gQ09NUExFVEUiKQogICAgcHJpbnQoIj0iICogNTApCiAgICBwcmludChmIlN1Y2Nlc3NmdWw6IHtzdWNjZXNzZXN9IikKICAgIHByaW50KGYiRmFpbGVkOiAgICAge2ZhaWx1cmVzfSIpCiAgICBwcmludChmIlNraXBwZWQ6ICAgIHthbHJlYWR5X2RvbmV9IikKICAgIGlmIGZhaWxlZF9pZHM6CiAgICAgICAgaWRzX3N0ciA9ICIsIi5qb2luKHN0cih4KSBmb3IgeCBpbiBmYWlsZWRfaWRzKQogICAgICAgIHByaW50KGYiXG5GYWlsZWQgSURzIChyZS1ydW4gd2l0aCAtLXJlZG8ge2lkc19zdHJ9KToiKQogICAgICAgIGZvciB0aWQgaW4gZmFpbGVkX2lkczoKICAgICAgICAgICAgcHJpbnQoZiIgICN7dGlkOjA0ZH0iKQoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCkK",
    "update_metadata_cid.py": "IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiIKUmVwbGFjZSBZT1VSX0NJRF9IRVJFIGluIGFsbCBtZXRhZGF0YSBmaWxlcyB3aXRoIGFuIGFjdHVhbCBJUEZTIENJRC4KClVzYWdlOgogICAgcHl0aG9uIHVwZGF0ZV9tZXRhZGF0YV9jaWQucHkgUW1Zb3VyQWN0dWFsQ0lESGVyZQoiIiIKCmltcG9ydCBqc29uCmltcG9ydCBvcwppbXBvcnQgc3lzCgoKZGVmIG1haW4oKToKICAgIGlmIGxlbihzeXMuYXJndikgIT0gMjoKICAgICAgICBwcmludCgiVXNhZ2U6IHB5dGhvbiB1cGRhdGVfbWV0YWRhdGFfY2lkLnB5IDxJUEZTX0NJRD4iKQogICAgICAgIHByaW50KCJFeGFtcGxlOiBweXRob24gdXBkYXRlX21ldGFkYXRhX2NpZC5weSBRbVh5N3ouLi4iKQogICAgICAgIHN5cy5leGl0KDEpCgogICAgY2lkID0gc3lzLmFyZ3ZbMV0uc3RyaXAoKQogICAgbWV0YWRhdGFfZGlyID0gIm91dHB1dC9tZXRhZGF0YSIKCiAgICBpZiBub3Qgb3MucGF0aC5pc2RpcihtZXRhZGF0YV9kaXIpOgogICAgICAgIHByaW50KGYiRVJST1I6IHttZXRhZGF0YV9kaXJ9IG5vdCBmb3VuZC4gUnVuIGdlbmVyYXRlX3Byb21wdHMucHkgZmlyc3QuIikKICAgICAgICBzeXMuZXhpdCgxKQoKICAgIHVwZGF0ZWQgPSAwCiAgICBmb3IgZmlsZW5hbWUgaW4gc29ydGVkKG9zLmxpc3RkaXIobWV0YWRhdGFfZGlyKSk6CiAgICAgICAgaWYgbm90IGZpbGVuYW1lLmVuZHN3aXRoKCIuanNvbiIpOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHBhdGggPSBvcy5wYXRoLmpvaW4obWV0YWRhdGFfZGlyLCBmaWxlbmFtZSkKICAgICAgICB3aXRoIG9wZW4ocGF0aCkgYXMgZjoKICAgICAgICAgICAgZGF0YSA9IGpzb24ubG9hZChmKQoKICAgICAgICBvbGRfaW1hZ2UgPSBkYXRhLmdldCgiaW1hZ2UiLCAiIikKICAgICAgICBuZXdfaW1hZ2UgPSBvbGRfaW1hZ2UucmVwbGFjZSgiWU9VUl9DSURfSEVSRSIsIGNpZCkKCiAgICAgICAgaWYgbmV3X2ltYWdlICE9IG9sZF9pbWFnZToKICAgICAgICAgICAgZGF0YVsiaW1hZ2UiXSA9IG5ld19pbWFnZQogICAgICAgICAgICB3aXRoIG9wZW4ocGF0aCwgInciKSBhcyBmOgogICAgICAgICAgICAgICAganNvbi5kdW1wKGRhdGEsIGYsIGluZGVudD0yKQogICAgICAgICAgICB1cGRhdGVkICs9IDEKCiAgICBwcmludChmIlVwZGF0ZWQge3VwZGF0ZWR9IG1ldGFkYXRhIGZpbGVzIHdpdGggQ0lEOiB7Y2lkfSIpCiAgICBpZiB1cGRhdGVkID09IDA6CiAgICAgICAgcHJpbnQoIihObyBmaWxlcyBjb250YWluZWQgWU9VUl9DSURfSEVSRSDigJQgd2VyZSB0aGV5IGFscmVhZHkgdXBkYXRlZD8pIikKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigpCg==",
}

os.makedirs(PROJECT, exist_ok=True)
for name, data in FILES.items():
    path = os.path.join(PROJECT, name)
    with open(path, "wb") as f:
        f.write(base64.b64decode(data))
    print(f"  Created {path}")

print()
print("=" * 55)
print("  SETUP COMPLETE!")
print("=" * 55)
print()
print("  Next steps:")
print(f"    cd {PROJECT}")
print("    pip install -r requirements.txt")
print('    export FAL_KEY="your-fal-api-key-here"')
print()
print("    python generate_prompts.py                    # step 1: generate prompts")
print("    python generate_images.py --start 1 --end 20  # step 2: test batch")
print("    python generate_images.py                     # step 2: full 2000")
print()
